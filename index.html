<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Hitung Patungan Makan</title>
  <style>
    body { font-family: Arial; padding: 20px; max-width: 700px; margin: auto; }
    input[type="number"] { width: 60px; }
    .menu-item { margin-bottom: 10px; }
    img { max-width: 100%; margin-top: 10px; }
    .hasil { margin-top: 20px; font-weight: bold; }
  </style>
</head>
<body>
  <h2>Hitung Patungan Pesanan Makanan</h2>

  <label>Upload Foto Struk:</label><br>
  <input type="file" accept="image/*" onchange="previewImage(event)"><br>
  <img id="strukPreview"><br><br>

  <div id="menuList">
    <div class="menu-item">
      <label>Bakmi Ayam Oven Original (Rp40.500): </label>
      <input type="number" min="0" value="0" id="m1"> orang
    </div>
    <div class="menu-item">
      <label>Promo Bakmi Ayam Matah + Vanilla Tea (Rp46.500): </label>
      <input type="number" min="0" value="0" id="m2"> orang
    </div>
    <div class="menu-item">
      <label>Bakmi Ayam Oven Komplit (Rp57.500): </label>
      <input type="number" min="0" value="0" id="m3"> orang
    </div>
  </div>

  <button onclick="hitungPatungan()">Hitung Total Per Orang</button>

  <div class="hasil" id="hasilPatungan"></div>

  <script>
    function previewImage(event) {
      const img = document.getElementById("strukPreview");
      img.src = URL.createObjectURL(event.target.files[0]);
    }

    function hitungPatungan() {
      const harga = [40500, 46500, 57500];
      const jml = [
        parseInt(document.getElementById("m1").value) || 0,
        parseInt(document.getElementById("m2").value) || 0,
        parseInt(document.getElementById("m3").value) || 0
      ];

      let totalMenu = 0;
      for (let i = 0; i < harga.length; i++) totalMenu += harga[i];

      const delivery = 10000;
      const fee = 3000;
      const diskon = 47685;
      const totalBayar = totalMenu + delivery + fee - diskon;

      const totalOrang = jml.reduce((a, b) => a + b, 0);
      if (totalOrang === 0) {
        document.getElementById("hasilPatungan").innerText = "Isi jumlah orang yang pesan dulu.";
        return;
      }

      let hasil = "";
      for (let i = 0; i < jml.length; i++) {
        if (jml[i] > 0) {
          const proporsi = (harga[i] / totalMenu);
          const totalBayarMenu = totalBayar * proporsi;
          const bayarPerOrang = totalBayarMenu / jml[i];
          hasil += `Menu ${i + 1}: ${jml[i]} orang x Rp${bayarPerOrang.toFixed(0)}<br>`;
        }
      }

      document.getElementById("hasilPatungan").innerHTML = hasil;
    }
  </script>
</body>
</html>
